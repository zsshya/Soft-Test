# OS

#### 1、OS相关概念

​	计算机硬件之上的第一个软件

##### （1）作用

​	管理系统的硬件，软件，数据资源；控制程序运行；人机之间的接口；应用软件与硬件之间的接口。
​	进程管理；存储管理；文件管理；作业管理；设备管理。

##### （2）特殊的OS

![OS分类](.\res\OS分类.png)



#### 2、进程的概念

​	进程是程序在一个数据集合上运行的过程，他是系统进行**资源分配和调度**的一个独立单位。它由**程序块、进程控制块（PCB）和数据块**三部分组成。

##### （1）PCB

​	进程存在的唯一标准。内容包含进程标识符、状态、位置信息、控制信息、**队列指针（链接同一状态的进程）**、优先级、现场保护区等。

##### （2）进程与程序的区别

​	进程是程序的一次执行过程，没有程序就没有进程。

​	程序是一个**静态的概念**，而进程是一个**动态的概念**，它由创建而产生，完成任务后因撤销而消亡；进程是系统进行资源分配和调度的独立单位，而程序不是。

##### （3）进程与线程

![进程与线程](.\res\进程与线程.png)



##### （4）进程的状态

三态：

![进程的状态（3态）](.\res\进程的状态（3态）.png)

​                  ”某个事件“未发生；”事件“发生。

五态：

![进程的状态（5态）](.\res\进程的状态（5态）.png)



#### 3、进程调度

##### （1）进程的同步与互斥

​	**临界资源**：诸进程间需要互斥方式对其进行共享的资源。（进程中访问临界资源的那段**代码**称为**临界区**）

​	**互斥**：间接制约关系。

​	**同步**：直接制约关系。

##### （2）PV操作（并发）

![PV操作](.\res\PV操作.png)

先减1，P操作 S<0；先加1（释放/解锁资源），V操作S<=0（检查是否有进程排队，有则进程进入就绪态）。

##### （3）信号量与PV操作

​	PV操作与互斥模型（多个进程共享一台打印机问题）：

```
P(S);                  互斥信号量S初始值为1
使用打印机;
V(S);
后续代码;         
```

​	PV操作与同步模型（单缓冲区生产者、消费者问题）：

```
生产者：                           消费者：
	生产一个产品;      S1初值为1     	P(S2);      S2初值为2
	P(S1);                            从缓冲区取产品;
	送产品到缓冲区;                     V(S1);
	V(S2)；                           消费产品;
```

​	**缓冲区**<临界资源>

```
生产者：                           消费者：
	生产一个产品;      S1初值为1     	P(S2);      S2初值为2
	P(S1);                            P(S);
	P(S);                             从缓冲区取产品;
	送产品到缓冲区;                     V(S);
	V(S);                             V(S1);
	V(S2)；                           消费产品;
```

​	空间为M的缓冲区：S1的初值为M

##### （4）前趋图与PV操作

​	![前趋图与PV](.\res\前趋图与PV.png)
